<!DOCTYPE html>
<html lang="ar" dir="rtl" data-theme="light"><head>
<style>
/* إصلاح responsive لجميع الشاشات */
* {
  box-sizing: border-box;
  max-width: 100%;
}

html, body {
  overflow-x: hidden !important;
  width: 100% !important;
  margin: 0 !important;
  padding: 0 !important;
}

body {
  max-width: 100vw !important;
  padding: 20px 15px 120px 15px !important;
}

/* إصلاح الصور والجداول */
img, table, pre, code {
  max-width: 100% !important;
  height: auto !important;
  overflow-x: auto !important;
}

/* إصلاح العناصر الكبيرة */
div, p, h1, h2, h3, h4, h5, h6 {
  max-width: 100% !important;
  word-wrap: break-word !important;
  overflow-wrap: break-word !important;
}

/* responsive للموبايل */
@media (max-width: 768px) {
  body {
    font-size: 16px !important;
    padding: 15px 10px 120px 10px !important;
  }
  
  h1 { font-size: 1.8rem !important; }
  h2 { font-size: 1.5rem !important; }
  h3 { font-size: 1.3rem !important; }
}
</style>
<script>(function(firebaseConfig, initialAuthToken, appId) {
        window.__firebase_config = firebaseConfig;
        window.__initial_auth_token = initialAuthToken;
        window.__app_id = appId;
            })("\n{\n  \"apiKey\": \"AIzaSyCqyCcs2R2e7AegGjvFAwG98wlamtbHvZY\",\n  \"authDomain\": \"bard-frontend.firebaseapp.com\",\n  \"projectId\": \"bard-frontend\",\n  \"storageBucket\": \"bard-frontend.firebasestorage.app\",\n  \"messagingSenderId\": \"175205271074\",\n  \"appId\": \"1:175205271074:web:2b7bd4d34d33bf38e6ec7b\"\n}\n","eyJhbGciOiJSUzI1NiIsImtpZCI6ImIxZjQyNzYzZjkzNGExOTQwMWNkOTFhNjdjY2FhNzdiNjIwNWU2N2EiLCJ0eXAiOiJKV1QifQ.eyJzdWIiOiJmaXJlYmFzZS1hZG1pbnNkay1mYnN2Y0BiYXJkLWZyb250ZW5kLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwiYXVkIjoiaHR0cHM6Ly9pZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb20vZ29vZ2xlLmlkZW50aXR5LmlkZW50aXR5dG9vbGtpdC52MS5JZGVudGl0eVRvb2xraXQiLCJ1aWQiOiIwNzA5MjQyNzU0MTU0NTY0NjY4MCIsImlzcyI6ImZpcmViYXNlLWFkbWluc2RrLWZic3ZjQGJhcmQtZnJvbnRlbmQuaWFtLmdzZXJ2aWNlYWNjb3VudC5jb20iLCJjbGFpbXMiOnsiYXBwSWQiOiJjXzQ0ZWEzMjVlNmVjZWE1OTJf2KfZhNmB2LXZhF_Yp9mE2LnYp9i02LFf2KrYtdmF2YrZhV_Yp9mE2YXZiNir2YjZgtmK2KkuaHRtbC02MzMifSwiZXhwIjoxNzcwMTE5NDM0LCJpYXQiOjE3NzAxMTU4MzQsImFsZyI6IlJTMjU2In0.IKpgct2MvI03lgAILlyu05nlGYSy9M4hIfn0vIbe9ys5qzRsTVYX5cpW21uwbNCTCbXED8MFw7tERFndDspYllIOFwhRMZWPpQFI1DKSSNAPGTVzTKKErkjfenbO0KSDOjMtBOnDmyoODlepfd2U7rooCzvXO-KA_qQZV5g0j-cyuAlaT88DYkfIAj-FUFre0RrEoBxYYWeygS0bX0WncdS73jjBIa_7zGTWZ72fMyfC7t6oq9oEtPUSXqs3xVPWq1iLlsgTf7G0IRtlEeblUlCY71wmlMEv5_A1CpV5XwVABmx55B8QQ0kR2EfqZPoLoxAKJWrGN1DzMWrVpVPClg","c_44ea325e6ecea592_الفصل_العاشر_تصميم_الموثوقية.html-633")</script><script>'use strict';var h=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,b,d){if(a==Array.prototype||a==Object.prototype)return a;a[b]=d.value;return a};function l(a){a=["object"==typeof globalThis&&globalThis,a,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var b=0;b<a.length;++b){var d=a[b];if(d&&d.Math==Math)return d}throw Error("Cannot find global object");}var n=l(this);
function p(a,b){if(b)a:{var d=n;a=a.split(".");for(var c=0;c<a.length-1;c++){var e=a[c];if(!(e in d))break a;d=d[e]}a=a[a.length-1];c=d[a];b=b(c);b!=c&&b!=null&&h(d,a,{configurable:!0,writable:!0,value:b})}}function r(a){function b(c){return a.next(c)}function d(c){return a.throw(c)}return new Promise(function(c,e){function f(g){g.done?c(g.value):Promise.resolve(g.value).then(b,d).then(f,e)}f(a.next())})}function t(a){return r(a())}
p("Object.values",function(a){return a?a:function(b){var d=[],c;for(c in b)Object.prototype.hasOwnProperty.call(b,c)&&d.push(b[c]);return d}});p("Array.prototype.includes",function(a){return a?a:function(b,d){var c=this;c instanceof String&&(c=String(c));var e=c.length;d=d||0;for(d<0&&(d=Math.max(d+e,0));d<e;d++){var f=c[d];if(f===b||Object.is(f,b))return!0}return!1}});/*

 MIT License

 Copyright (c) 2017-2023 W.Y.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 SOFTWARE.

*/
function u(a,b){const d=a.style;b.backgroundColor&&(d.backgroundColor=b.backgroundColor);b.width&&(d.width=`${b.width}px`);b.height&&(d.height=`${b.height}px`);const c=b.style;c!=null&&Object.keys(c).forEach(e=>{d[e]=c[e]})};var v=(()=>{let a=0;return()=>{a+=1;return`u${`0000${(Math.random()*1679616<<0).toString(36)}`.slice(-4)}${a}`}})();function w(a){const b=[];for(let d=0,c=a.length;d<c;d++)b.push(a[d]);return b}let x=null;function y(a={}){return x?x:a.l?x=a.l:x=w(window.getComputedStyle(document.documentElement))}function z(a,b){return(a=(a.ownerDocument.defaultView||window).getComputedStyle(a).getPropertyValue(b))?parseFloat(a.replace("px","")):0}
function A(a,b={}){var d;if(!(d=b.width)){d=z(a,"border-left-width");var c=z(a,"border-right-width");d=a.clientWidth+d+c}(b=b.height)||(b=z(a,"border-top-width"),c=z(a,"border-bottom-width"),b=a.clientHeight+b+c);return{width:d,height:b}}function B(a){return new Promise((b,d)=>{const c=new Image;c.onload=()=>{c.decode().then(()=>{requestAnimationFrame(()=>b(c))})};c.onerror=d;c.crossOrigin="anonymous";c.decoding="async";c.src=a})}
function C(a){return t(function*(){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(a)).then(encodeURIComponent).then(b=>`data:image/svg+xml;charset=utf-8,${b}`)})}
function D(a,b,d){return t(function*(){const c=document.createElementNS("http://www.w3.org/2000/svg","svg"),e=document.createElementNS("http://www.w3.org/2000/svg","foreignObject");c.setAttribute("width",`${b}`);c.setAttribute("height",`${d}`);c.setAttribute("viewBox",`0 0 ${b} ${d}`);e.setAttribute("width","100%");e.setAttribute("height","100%");e.setAttribute("x","0");e.setAttribute("y","0");e.setAttribute("externalResourcesRequired","true");c.appendChild(e);e.appendChild(a);return C(c)})}
var E=(a,b)=>{if(a instanceof b)return!0;a=Object.getPrototypeOf(a);return a===null?!1:a.constructor.name===b.name||E(a,b)};function F(a,b){return y(b).map(d=>{const c=a.getPropertyValue(d),e=a.getPropertyPriority(d);return`${d}: ${c}${e?" !important":""};`}).join(" ")}
function G(a,b,d,c){a=window.getComputedStyle(a,d);var e=a.getPropertyValue("content");if(e!==""&&e!=="none"){var f=v();try{b.className=`${b.className} ${f}`}catch(k){return}e=document.createElement("style");var g=e.appendChild;d=`.${f}:${d}`;a.cssText?(c=a.getPropertyValue("content"),c=`${a.cssText} content: '${c.replace(/'|"/g,"")}';`):c=F(a,c);g.call(e,document.createTextNode(`${d}{${c}}`));b.appendChild(e)}};function H(a){return a.search(/^(data:)/)!==-1}function I(a,b,d){return t(function*(){const c=yield fetch(a,b);if(c.status===404)throw Error(`Resource "${c.url}" not found`);const e=yield c.blob();return new Promise((f,g)=>{const k=new FileReader;k.onerror=g;k.onloadend=()=>{try{f(d({o:c,result:k.result}))}catch(m){g(m)}};k.readAsDataURL(e)})})}const J={};function K(a,b,d){let c=a.replace(/\?.*/,"");d&&(c=a);/ttf|otf|eot|woff2?/i.test(c)&&(c=c.replace(/.*\//,""));return b?`[${b}]${c}`:c}
function L(a,b,d){return t(function*(){const c=K(a,b,d.C);if(J[c]!=null)return J[c];d.u&&(a+=(/\?/.test(a)?"&":"?")+(new Date).getTime());let e;try{const f=yield I(a,d.i,({o:g,result:k})=>{b||(b=g.headers.get("Content-Type")||"");return k.split(/,/)[1]});e=`data:${b};base64,${f}`}catch(f){e=d.B||""}return J[c]=e})};const M={P:"application/font-woff",R:"application/font-woff",N:"application/font-truetype",v:"application/vnd.ms-fontobject",H:"image/png",F:"image/jpeg",D:"image/jpeg",A:"image/gif",M:"image/tiff",L:"image/svg+xml",O:"image/webp"};function N(a){return(a=/\.([^./]*?)$/g.exec(a))?a[1]:""};function O(a){return t(function*(){const b=a.toDataURL();return b==="data:,"?a.cloneNode(!1):B(b)})}function aa(a,b){return t(function*(){if(a.currentSrc){var d=document.createElement("canvas");const c=d.getContext("2d");d.width=a.clientWidth;d.height=a.clientHeight;c==null||c.drawImage(a,0,0,d.width,d.height);d=d.toDataURL();return B(d)}d=a.poster;d=yield L(d,M[N(d).toLowerCase()]||"",b);return B(d)})}
function ba(a,b){return t(function*(){try{let d;if(a==null?0:(d=a.contentDocument)==null?0:d.body)return yield P(a.contentDocument.body,b,!0)}catch(d){}return a.cloneNode(!1)})}function ca(a,b){return t(function*(){return E(a,HTMLCanvasElement)?O(a):E(a,HTMLVideoElement)?aa(a,b):E(a,HTMLIFrameElement)?ba(a,b):a.cloneNode(a.tagName!=null&&a.tagName.toUpperCase()==="SVG")})}
function da(a,b,d){return t(function*(){if(b.tagName!=null&&b.tagName.toUpperCase()==="SVG")return b;let c=[];if(a.tagName!=null&&a.tagName.toUpperCase()==="SLOT"&&a.assignedNodes)c=w(a.assignedNodes());else{let e;if(E(a,HTMLIFrameElement)&&((e=a.contentDocument)==null?0:e.body))c=w(a.contentDocument.body.childNodes);else{let f;c=w(((f=a.shadowRoot)!=null?f:a).childNodes)}}if(c.length===0||E(a,HTMLVideoElement))return b;yield c.reduce((e,f)=>e.then(()=>P(f,d)).then(g=>{g&&b.appendChild(g)}),Promise.resolve());
return b})}function ea(a,b,d){const c=b.style;if(c){var e=window.getComputedStyle(a);e.cssText?(c.cssText=e.cssText,c.transformOrigin=e.transformOrigin):y(d).forEach(f=>{let g=e.getPropertyValue(f);f==="font-size"&&g.endsWith("px")&&(g=`${Math.floor(parseFloat(g.substring(0,g.length-2)))-.1}px`);E(a,HTMLIFrameElement)&&f==="display"&&g==="inline"&&(g="block");f==="d"&&b.getAttribute("d")&&(g=`path(${b.getAttribute("d")})`);c.setProperty(f,g,e.getPropertyPriority(f))})}}
function fa(a,b){E(a,HTMLSelectElement)&&(b=Array.from(b.children).find(d=>a.value===d.getAttribute("value")))&&b.setAttribute("selected","")}
function ha(a,b){return t(function*(){var d=a.querySelectorAll?a.querySelectorAll("use"):[];if(d.length===0)return a;var c={};for(var e=0;e<d.length;e++){var f=d[e].getAttribute("xlink:href");if(f){const g=document.querySelector(f);a.querySelector(f)||!g||c[f]||(c[f]=yield P(g,b,!0))}}d=Object.values(c);if(d.length){c=document.createElementNS("http://www.w3.org/1999/xhtml","svg");c.setAttribute("xmlns","http://www.w3.org/1999/xhtml");c.style.position="absolute";c.style.width="0";c.style.height="0";
c.style.overflow="hidden";c.style.display="none";e=document.createElementNS("http://www.w3.org/1999/xhtml","defs");c.appendChild(e);for(f=0;f<d.length;f++)e.appendChild(d[f]);a.appendChild(c)}return a})}
function P(a,b,d){return t(function*(){return d||!b.filter||b.filter(a)?Promise.resolve(a).then(c=>ca(c,b)).then(c=>da(a,c,b)).then(c=>{E(c,Element)&&(ea(a,c,b),G(a,c,":before",b),G(a,c,":after",b),E(a,HTMLTextAreaElement)&&(c.textContent=a.value),E(a,HTMLInputElement)&&c.setAttribute("value",a.value),fa(a,c));return c}).then(c=>ha(c,b)):null})};const Q=/url\((['"]?)([^'"]+?)\1\)/g,ia=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,ja=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function ka(a){const b=[];a.replace(Q,(d,c,e)=>{b.push(e);return d});return b.filter(d=>!H(d))}
function la(a,b,d,c){return t(function*(){try{const e=d?(new URL(b,d||void 0)).toString():b;let f;f=yield L(e,M[N(b).toLowerCase()]||"",c);return a.replace(new RegExp(`(url\\(['"]?)(${b.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")})(['"]?\\))`,"g"),`$1${f}$3`)}catch(e){}return a})}function ma(a,{I:b}){return b?a.replace(ja,d=>{for(;;){const [c,,e]=ia.exec(d)||[],f=c,g=e;if(!g)return"";if(g===b)return`src: ${f};`}}):a}
function R(a,b,d){return t(function*(){if(a.search(Q)===-1)return a;const c=ma(a,d);return ka(c).reduce((e,f)=>e.then(g=>la(g,f,b,d)),Promise.resolve(c))})};function S(a,b,d){return t(function*(){var c;const e=(c=b.style)==null?void 0:c.getPropertyValue(a);return e?(c=yield R(e,null,d),b.style.setProperty(a,c,b.style.getPropertyPriority(a)),!0):!1})}function na(a,b){return t(function*(){(yield S("background",a,b))||(yield S("background-image",a,b));(yield S("mask",a,b))||(yield S("-webkit-mask",a,b))||(yield S("mask-image",a,b))||(yield S("-webkit-mask-image",a,b))})}
function oa(a,b){return t(function*(){const d=E(a,HTMLImageElement);if(d&&!H(a.src)||E(a,SVGImageElement)&&!H(a.href.baseVal)){var c=d?a.src:a.href.baseVal,e=yield L(c,M[N(c).toLowerCase()]||"",b);yield new Promise((f,g)=>{a.onload=f;a.onerror=b.m?(...k)=>{try{f(b.m(...k))}catch(m){g(m)}}:g;a.decode&&(a.decode=f);a.loading==="lazy"&&(a.loading="eager");d?(a.srcset="",a.src=e):a.href.baseVal=e})}})}
function pa(a,b){return t(function*(){const d=w(a.childNodes).map(c=>T(c,b));yield Promise.all(d).then(()=>a)})}function T(a,b){return t(function*(){E(a,Element)&&(yield na(a,b),yield oa(a,b),yield pa(a,b))})};const U={};function V(a){return t(function*(){var b=U[a];if(b!=null)return b;b=yield(yield fetch(a)).text();b={url:a,cssText:b};return U[a]=b})}function W(a,b){return t(function*(){let d=a.cssText;const c=/url\(["']?([^"')]+)["']?\)/g,e=(d.match(/url\([^)]+\)/g)||[]).map(f=>t(function*(){let g=f.replace(c,"$1");g.startsWith("https://")||(g=(new URL(g,a.url)).href);return I(g,b.i,({result:k})=>{d=d.replace(f,`url(${k})`);return[f,k]})}));return Promise.all(e).then(()=>d)})}
function X(a){if(a==null)return[];const b=[];a=a.replace(/(\/\*[\s\S]*?\*\/)/gi,"");for(var d=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");;){var c=d.exec(a);if(c===null)break;b.push(c[0])}a=a.replace(d,"");d=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi;for(c=RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");;){let e=d.exec(a);if(e===null)if(e=c.exec(a),e===null)break;else d.lastIndex=c.lastIndex;else c.lastIndex=
d.lastIndex;b.push(e[0])}return b}
function qa(a,b){return t(function*(){const d=[],c=[];a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach((f,g)=>{if(f.type===CSSRule.IMPORT_RULE){let k=g+1;f=V(f.href).then(m=>W(m,b)).then(m=>X(m).forEach(q=>{try{e.insertRule(q,q.startsWith("@import")?k+=1:e.cssRules.length)}catch(Da){}})).catch(()=>{});c.push(f)}})}catch(f){const g=a.find(k=>k.href==null)||document.styleSheets[0];e.href!=null&&c.push(V(e.href).then(k=>W(k,b)).then(k=>X(k).forEach(m=>{g.insertRule(m,g.cssRules.length)})).catch(()=>
{}))}});return Promise.all(c).then(()=>{a.forEach(e=>{if("cssRules"in e)try{w(e.cssRules||[]).forEach(f=>{d.push(f)})}catch(f){}});return d})})}function ra(a){return a.filter(b=>b.type===CSSRule.FONT_FACE_RULE).filter(b=>b.style.getPropertyValue("src").search(Q)!==-1)}function sa(a,b){return t(function*(){if(a.ownerDocument==null)throw Error("Provided element is not within a Document");var d=w(a.ownerDocument.styleSheets);d=yield qa(d,b);return ra(d)})}
function ta(a){function b(c){(c.style.fontFamily||getComputedStyle(c).fontFamily).split(",").forEach(e=>{d.add(e.trim().replace(/["']/g,""))});Array.from(c.children).forEach(e=>{e instanceof HTMLElement&&b(e)})}const d=new Set;b(a);return d}function ua(a,b){return t(function*(){const d=yield sa(a,b),c=ta(a);return(yield Promise.all(d.filter(e=>c.has(e.style.fontFamily.trim().replace(/["']/g,""))).map(e=>R(e.cssText,e.parentStyleSheet?e.parentStyleSheet.href:null,b)))).join("\n")})}
function va(a,b){return t(function*(){const d=b.j!=null?b.j:b.K?null:yield ua(a,b);if(d){const c=document.createElement("style");c.appendChild(document.createTextNode(d));a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c)}})};function wa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b),e=yield P(a,b,!0);yield va(e,b);yield T(e,b);u(e,b);return yield D(e,d,c)})}
function xa(a,b={}){return t(function*(){const {width:d,height:c}=A(a,b);var e=yield wa(a,b);e=yield B(e);const f=document.createElement("canvas"),g=f.getContext("2d"),k=b.G||window.devicePixelRatio||1,m=b.h||d,q=b.g||c;f.width=m*k;f.height=q*k;!b.J&&(f.width>16384||f.height>16384)&&(f.width>16384&&f.height>16384?f.width>f.height?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=16384):f.width>16384?(f.height*=16384/f.width,f.width=16384):(f.width*=16384/f.height,f.height=
16384));f.style.width=`${m}`;f.style.height=`${q}`;b.backgroundColor&&(g.fillStyle=b.backgroundColor,g.fillRect(0,0,f.width,f.height));g.drawImage(e,0,0,f.width,f.height);return f})}function ya(a,b={}){return t(function*(){return(yield xa(a,b)).toDataURL()})};const za=["gemini.google.com","corp.google.com","proxy.googlers.com"];function Y(){return document.body.querySelectorAll('[class*="animate"]').length>0}function Z(a){return t(function*(){try{return yield ya(a,{h:a.offsetWidth,g:a.offsetHeight})}catch(d){var b=a.offsetHeight;const c=document.createElement("canvas");c.width=a.offsetWidth;c.height=b;return c.toDataURL("image/png")}})}
function Aa(){return t(function*(){const a=document.body.offsetWidth,b=document.body.offsetHeight,d=document.body.cloneNode(!0);d.querySelectorAll('[class*="animate"]').forEach(c=>{c.classList.remove(...Array.from(c.classList).filter(e=>e.startsWith("animate")))});d.style.width=`${a}px`;d.style.height=`${b}px`;return d})}
function Ba(a){return t(function*(){let b=document.body;if(Y()){var d=yield Aa();b=d;document.body.appendChild(d)}d=yield Z(b);Y()&&document.body.removeChild(b);window.parent.postMessage({type:"SEND_SCREENSHOT",image:d,topOffset:document.documentElement.scrollTop},a.origin)})}function Ca(a){return t(function*(){const b={type:"SEND_SCREENSHOT_FOR_DATA_VISUALIZATION",image:yield Z(document.body),topOffset:0};window.parent.postMessage(b,a.origin)})}
window.addEventListener("message",a=>t(function*(){if(za.some(d=>a.origin.includes(d))){var b=a.data;b&&(b.type==="MAKE_SCREENSHOT"&&(yield Ba(a)),b.type==="MAKE_SCREENSHOT_FOR_DATA_VISUALIZATION"&&(yield Ca(a)))}}));
</script><script>(function() {
  // Ensure this script is executed only once
  if (window.firebaseAuthBridgeScriptLoaded) {
    return;
  }
  window.firebaseAuthBridgeScriptLoaded = true;

  let nextTokenPromiseId = 0;

  // Stores { resolve, reject } for ongoing token requests
  const pendingTokenPromises = {};

  // Listen for messages from the Host Application
  window.addEventListener('message', function(event) {

    const messageData = event.data;

  if (messageData && messageData.type === 'RESOLVE_NEW_FIREBASE_TOKEN') {
      const { success, token, error, promiseId } = messageData ?? {};
      if (pendingTokenPromises[promiseId]) {
        if (success) {
          pendingTokenPromises[promiseId].resolve(token);
        } else {
          pendingTokenPromises[promiseId].reject(new Error(error || 'Token refresh failed from host.'));
        }
        delete pendingTokenPromises[promiseId];
      }
    }
  });

  // Expose a function for the Generated App to request a new Firebase token
  window.requestNewFirebaseToken = function() {
    const currentPromiseId = nextTokenPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingTokenPromises[currentPromiseId] = { resolve, reject };
    });
    if (window.parent && window.parent !== window) {
      window.parent.postMessage({
        type: 'REQUEST_NEW_FIREBASE_TOKEN',
        promiseId: currentPromiseId
      }, '*');
    } else {
      pendingTokenPromises[currentPromiseId].reject(new Error('No parent window to request token from.'));
      delete pendingTokenPromises[currentPromiseId];
    }
    return promise;
  };
})();</script><script>
let realOriginalGetUserMedia = null;
if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
  realOriginalGetUserMedia = navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);
}

(function() {
  if (navigator.mediaDevices && navigator.mediaDevices.__proto__) {
    try {
      Object.defineProperty(navigator.mediaDevices.__proto__, 'getUserMedia', {
        get: function() {
          return undefined; // Or throw an error
        },
        configurable: false
      });
    } catch (error) {
      console.error("Error defining prototype getter:", error);
    }
  }
})();

(function() {
  const pendingMediaResolvers = {};
  let nextMediaPromiseId = 0;

  function requestMediaPermissions(constraints) {
    const mediaPromiseId = nextMediaPromiseId++;
    const promise = new Promise((resolve, reject) => {
      pendingMediaResolvers[mediaPromiseId] = (granted) => {
        delete pendingMediaResolvers[mediaPromiseId];
        resolve(granted);
      };
    });

    window.parent.postMessage({
      type: 'requestMediaPermission',
      constraints: constraints,
      promiseId: mediaPromiseId,
    }, '*');

    return promise;
  }

  let originalGetUserMedia = realOriginalGetUserMedia;

  function interceptGetUserMedia() {
    if (navigator.mediaDevices) {
      Object.defineProperty(navigator.mediaDevices, 'getUserMedia', {
        value: function(constraints) {
          return requestMediaPermissions(constraints).then((granted) => {
            if (granted) {
              if (originalGetUserMedia) {
                return originalGetUserMedia(constraints);
              } else {
                throw new Error("Original getUserMedia not available.");
              }
            } else {
              throw new DOMException('Permission denied', 'NotAllowedError');
            }
          });
        },
        writable: false,
        configurable: false
      });
    }
  }

  interceptGetUserMedia();

  const observer = new MutationObserver(function(mutationsList, observer) {
    for (const mutation of mutationsList) {
      if (mutation.type === 'reconfigured' && mutation.name === 'getUserMedia' && mutation.object === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'attributes' && mutation.attributeName === 'getUserMedia' && mutation.target === navigator.mediaDevices) {
        interceptGetUserMedia();
      } else if (mutation.type === 'childList' && mutation.addedNodes) {
        mutation.addedNodes.forEach(node => {
          if (node === navigator.mediaDevices) {
            interceptGetUserMedia();
          }
        });
      }
    }
  });

  function interceptSpeechRecognition() {
    if (!window.SpeechRecognition && !window.webkitSpeechRecognition) {
      return;
    }

    const OriginalSpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    const SpeechRecognitionWrapper = function(...args) {
      const recognizer = new OriginalSpeechRecognition(...args);
      const originalStart = recognizer.start.bind(recognizer);

      recognizer.start = function() {
        requestMediaPermissions({ audio: true }).then(granted => {
          if (granted) {
            originalStart();
          } else {
            const errorEvent = new SpeechRecognitionErrorEvent('error');
            errorEvent.error = 'not-allowed'; // This is the standard error for permission denial.
            recognizer.dispatchEvent(errorEvent);
          }
        });
      };

      return recognizer;
    };

    SpeechRecognitionWrapper.prototype = OriginalSpeechRecognition.prototype;
    SpeechRecognitionWrapper.prototype.constructor = SpeechRecognitionWrapper;

    if (window.SpeechRecognition) {
      window.SpeechRecognition = SpeechRecognitionWrapper;
    }
    if (window.webkitSpeechRecognition) {
      window.webkitSpeechRecognition = SpeechRecognitionWrapper;
    }
  }

  interceptSpeechRecognition();

  window.addEventListener('message', function(event) {
    if (event.data) {
      if (event.data.type === 'resolveMediaPermission') {
        const { promiseId, granted } = event.data;
        if (pendingMediaResolvers[promiseId]) {
          pendingMediaResolvers[promiseId](granted);
        }
      }
    }
  });

})();</script><script>((function(modelInformation) {
  const originalFetch = window.fetch;
  // TODO: b/421908508 - Move these out of the script and match all generative AI model calls.
  let googleLlmBaseApiUrls = [
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':streamGenerateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.textModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageEditModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.imageTransformModelName + ':generateContent',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predict',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.videoModelName + ':predictLongRunning',
    'https://generativelanguage.googleapis.com/v1beta/models/' + modelInformation.ttsModelName + ':generateContent',
  ];
  modelInformation.deprecatedTextModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':streamGenerateContent',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':generateContent',
    );
  });
  modelInformation.deprecatedImageModelNames.forEach((modelName) => {
    googleLlmBaseApiUrls.push(
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':predict',
      'https://generativelanguage.googleapis.com/v1beta/models/' + modelName + ':predictLongRunning',
    );
  });

  const pendingFetchResolvers = {};
  let nextPromiseId = 0;

  function handleStringInput(input, optionsArgument) {
    const actualUrl = input;
    const fetchCallArgs = [actualUrl, optionsArgument];
    const effectiveOptions = optionsArgument || {};
    const bodyForApiKeyCheck = effectiveOptions.body;
    const bodyForPostMessage = effectiveOptions.body;
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  function handleRequestInput(input, optionsArgument) {
    const actualUrl = input.url;
    const fetchCallArgs = [input, optionsArgument];
    const effectiveOptions = { method: input.method, headers: new Headers(input.headers) };
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (optionsArgument) {
      if (optionsArgument.method) effectiveOptions.method = optionsArgument.method;
      if (optionsArgument.headers) effectiveOptions.headers = new Headers(optionsArgument.headers);
      if ('body' in optionsArgument) {
        bodyForApiKeyCheck = optionsArgument.body;
        bodyForPostMessage = optionsArgument.body;
      } else {
        bodyForApiKeyCheck = undefined;
        bodyForPostMessage = input.body;
      }
    } else {
      bodyForApiKeyCheck = undefined;
      bodyForPostMessage = input.body;
    }
    return { actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage };
  }

  window.fetch = function(input, optionsArgument) {
    let actualUrl;
    let fetchCallArgs;
    let effectiveOptions = {};
    let bodyForApiKeyCheck;
    let bodyForPostMessage;

    if (typeof input === 'string') {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleStringInput(input, optionsArgument));
    } else if (input instanceof Request) {
      ({actualUrl, fetchCallArgs, effectiveOptions, bodyForApiKeyCheck, bodyForPostMessage} = handleRequestInput(input, optionsArgument));
    } else {
      return originalFetch.apply(window, [input, optionsArgument]);
    }

    effectiveOptions.method = effectiveOptions.method || 'GET';
    if (!effectiveOptions.headers) {
      effectiveOptions.headers = new Headers();
    }


    if (typeof actualUrl === 'string' && googleLlmBaseApiUrls.some((url) => actualUrl.startsWith(url))) {
      let apiKeyIsNull = true;

      const regex = new RegExp("models/([^:]+)");
      const modelNameMatch = actualUrl.match(regex);
      const modelName = modelNameMatch ? modelNameMatch[1] : 'unspecified';


      try {
        const urlObject = new URL(actualUrl);  // Use URL object for robust parsing
        const apiKeyParam = urlObject.searchParams.get('key');
        if (apiKeyParam) {
          apiKeyIsNull = false;
        }
      } catch (e) {
        // Continue checks even if URL parsing fails
      }

      if (apiKeyIsNull && effectiveOptions.headers) {
        const h = new Headers(effectiveOptions.headers);
        const apiKeyHeaderValue = h.get('X-API-Key') || h.get('x-api-key');
        if (apiKeyHeaderValue) {
          apiKeyIsNull = false;
          return originalFetch.apply(window, fetchCallArgs);
        }
      }

      if (apiKeyIsNull && effectiveOptions.method && ['POST', 'PUT', 'PATCH'].includes(effectiveOptions.method.toUpperCase()) && typeof bodyForApiKeyCheck === 'string') {
        try {
          const bodyData = JSON.parse(bodyForApiKeyCheck);
          if (bodyData && bodyData.apiKey) {
            apiKeyIsNull = false;
            return originalFetch.apply(window, fetchCallArgs);
          }
        } catch (e) {
          // Ignore JSON parsing errors
        }
      }

      if(apiKeyIsNull) {
        const promiseId = nextPromiseId++;
        const promise = new Promise((resolve) => {
          pendingFetchResolvers[promiseId] = (resolvedResponse) => {
            delete pendingFetchResolvers[promiseId];
            resolve(resolvedResponse);
          };
        });

        let serializedBodyForPostMessage;
        if (typeof bodyForPostMessage === 'string' || bodyForPostMessage == null) {
            serializedBodyForPostMessage = bodyForPostMessage;
        } else if (bodyForPostMessage instanceof ReadableStream) {
            serializedBodyForPostMessage = null;
        } else {
            try {
                serializedBodyForPostMessage = JSON.stringify(bodyForPostMessage);
            } catch (e) {
                serializedBodyForPostMessage = null;
            }
        }

        const messageOptions = {
            method: effectiveOptions.method,
            headers: Object.fromEntries(new Headers(effectiveOptions.headers).entries()),
            body: serializedBodyForPostMessage
        };

        window.parent.postMessage({
          type: 'requestFetch',
          url: actualUrl,
          modelName: modelName,
          options: messageOptions,
          promiseId: promiseId,
        }, '*');

        return promise;
      }
      return originalFetch.apply(window, fetchCallArgs);
    }
    return originalFetch.apply(window, fetchCallArgs);
  };

  window.addEventListener('message', function(event) {
    if (event.data && event.data.type === 'resolveFetch') {
      const { promiseId, response } = event.data;
      if (pendingFetchResolvers[promiseId]) {
        try {
          const reconstructedResponse = new Response(response.body, {
            status: response.status,
            statusText: response.statusText,
            headers: new Headers(response.headers),
          });
          pendingFetchResolvers[promiseId](reconstructedResponse);
        } catch (error) {
          pendingFetchResolvers[promiseId](new Response(null, { status: 500, statusText: "Interceptor Response Reconstruction Error" }));
        }
      }
    }
  });

}))({"textModelName":"gemini-2.5-flash-preview-09-2025","imageModelName":"imagen-4.0-generate-001","imageEditModelName":"gemini-2.5-flash-image-preview","imageTransformModelName":"gemini-3-pro-image-preview-11-2025","videoModelName":"veo-2.0-generate-001","ttsModelName":"gemini-2.5-flash-preview-tts","deprecatedTextModelNames":["gemini-2.0-flash","gemini-2.5-flash-preview-04-17","gemini-2.5-flash-preview-05-20"],"deprecatedImageModelNames":["imagen-3.0-generate-001","imagen-3.0-generate-002"]})</script><script>(function() {
  const originalConsoleLog = console.log;
  const originalConsoleError = console.error;

    /**
   * Normalizes an error event or a promise rejection reason into a structured error object.
   * @param {*} errorEventOrReason The error object or reason.
   * @return {object} Structured error data { message, name, stack }.
   */
  function getErrorObject(errorEventOrReason) {
    if (errorEventOrReason instanceof Error) {
      return {
        message: errorEventOrReason.message,
        name: errorEventOrReason.name,
        stack: errorEventOrReason.stack,
      };
    }
    // Fallback for non-Error objects.
    try {
      return {
        message: JSON.stringify(errorEventOrReason),
        name: 'UnknownErrorType',
        stack: null,
      };
    } catch (e) {
      return {
        message: String(errorEventOrReason),
        name: 'UnknownErrorTypeNonStringifiable',
        stack: null,
      };
    }
  }

  /**
   * Converts an array of arguments (from log/error) into a single string.
   * Handles Error objects specially to include their message and stack.
   * @param {Array<*>} args - Arguments passed to console methods.
   * @return {string} A string representation of the arguments.
   */
  function stringifyArgs(args) {
    return args
      .map((arg) => {
        if (arg instanceof Error) {
          const {message, stack} = arg;
          return `Error: ${message}${stack ? ('\nStack: ' + stack) : ''}`;
        }
        if (typeof arg === 'object' && arg !== null) {
          try {
            return JSON.stringify(arg);
          } catch (error) {
            return '[Circular Object]';
          }
        } else {
          return String(arg);
        }
      })
      .join(' ');
  }

  console.log = function(...args) {
    const logString = stringifyArgs(args);
    window.parent.postMessage({ type: 'log', message: logString }, '*');
    originalConsoleLog.apply(console, args);
  };

  console.error = function(...args) {
    let errorData;
    if (args.length > 0 && args[0] instanceof Error) {
      const err = args[0];
      // If the first arg is an Error, capture its details.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        ...getErrorObject(err),
        rawArgsString: stringifyArgs(args.slice(1)),
        timestamp: new Date().toISOString(),
      };
    } else {
      // If not an Error object, treat all args as a general error message.
      errorData = {
        type: 'error',
        source: 'CONSOLE_ERROR',
        message: stringifyArgs(args),
        name: 'ConsoleLoggedError',
        stack: null,
        timestamp: new Date().toISOString(),
      };
    }
    window.parent.postMessage(errorData, '*');
    originalConsoleError.apply(console, args);
  };

  // Listen for global unhandled synchronous errors.
  window.addEventListener('error', function(event) {
    const errorDetails = event.error ? getErrorObject(event.error) : {
      message: event.message,
      name: 'GlobalError',
      stack: null,
      filename: event.filename,
      lineno: event.lineno,
      colno: event.colno,
    };

    window.parent.postMessage({
      type: 'error',
      source: 'global',
      ...errorDetails,
      message: errorDetails.message || event.message,
      timestamp: new Date().toISOString(),
    }, '*');
  });

  // Listen for unhandled promise rejections (asynchronous errors).
  window.addEventListener('unhandledrejection', function(event) {
    const errorDetails = getErrorObject(event.reason);

    window.parent.postMessage({
      type: 'error',
      source: 'unhandledrejection',
      ...errorDetails,
      message: errorDetails.message || 'Unhandled Promise Rejection',
      timestamp: new Date().toISOString(),
    }, '*');
  });

})();</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الفصل العاشر — تصميم خدمات تخدير موثوقة: الإنسان، العمليات، والتقنية</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&amp;family=Noto+Kufi+Arabic:wght@300;400;600;800&amp;display=swap" rel="stylesheet">
    <style>
      :root {
        --primary-blue: #2563eb;
        --light-blue-bg: #dbeafe;
        --text-color: #1f2937;
        --box-blue: #eff6ff;
        --box-blue-border: #bfdbfe;
        --box-green: #f0fdf4;
        --box-green-border: #bbf7d0;
        --box-yellow: #fefce8;
        --box-yellow-border: #fef08a;
        --box-red: #fef2f2;
        --box-red-border: #fecaca;
      }

      body {
        font-family: 'Amiri', 'Times New Roman', serif;
        line-height: 1.8;
        color: var(--text-color);
        background-color: #fff;
        max-width: 900px;
        margin: 0 auto;
        padding: 40px 60px;
        padding-top: 100px;
        box-sizing: border-box;
        text-align: right;
        font-size: 19px;
      }

      /* Download Bar Styles */
      .download-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background-color: #1e3a8a;
        color: white;
        padding: 15px;
        text-align: center;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        z-index: 1000;
        font-family: 'Noto Kufi Arabic', sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 20px;
      }

      .download-btn {
        background-color: #22c55e;
        color: white;
        border: none;
        padding: 8px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-family: 'Noto Kufi Arabic', sans-serif;
        font-weight: bold;
        font-size: 16px;
        text-decoration: none;
        transition: background-color 0.3s;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }

      .download-btn:hover {
        background-color: #16a34a;
      }

      @media print {
        .download-container { display: none; }
        body { padding-top: 0; }
      }

      /* Typography */
      h1 {
        font-family: 'Noto Kufi Arabic', sans-serif;
        font-weight: 800;
        color: #1e3a8a;
        text-align: center;
        font-size: 32px;
        margin-bottom: 10px;
        margin-top: 40px;
        line-height: 1.3;
      }

      .part-title {
        text-align: center;
        font-size: 18px;
        color: #6b7280;
        font-family: 'Noto Kufi Arabic', sans-serif;
        margin-bottom: 5px;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      h2 {
        font-family: 'Noto Kufi Arabic', sans-serif;
        font-weight: 600;
        color: var(--primary-blue);
        background-color: var(--light-blue-bg);
        padding: 12px 20px;
        margin-top: 50px;
        margin-bottom: 25px;
        border-right: 6px solid #1e40af;
        border-radius: 4px;
        font-size: 24px;
        page-break-after: avoid;
      }

      h3 {
        font-family: 'Noto Kufi Arabic', sans-serif;
        font-weight: 600;
        color: #1e40af;
        font-size: 20px;
        margin-top: 30px;
        margin-bottom: 15px;
        border-bottom: 2px solid #e5e7eb;
        padding-bottom: 5px;
      }

      p {
        margin-bottom: 18px;
      }

      .subtitle {
        text-align: center;
        font-size: 22px;
        color: #4b5563;
        margin-bottom: 40px;
        font-family: 'Noto Kufi Arabic', sans-serif;
        border-bottom: 1px solid #e5e7eb;
        padding-bottom: 20px;
      }

      /* Boxes Style */
      .quote-box {
        background-color: var(--box-blue);
        border: 1px solid var(--box-blue-border);
        border-right: 5px solid var(--primary-blue);
        padding: 20px 25px;
        margin: 25px 0;
        border-radius: 4px;
        color: #1e3a8a;
      }

      .alert-box {
        background-color: var(--box-red);
        border: 1px solid var(--box-red-border);
        border-right: 5px solid #ef4444;
        padding: 20px 25px;
        margin: 25px 0;
        border-radius: 4px;
      }

      .success-box {
        background-color: var(--box-green);
        border: 1px solid var(--box-green-border);
        border-right: 5px solid #22c55e;
        padding: 20px 25px;
        margin: 25px 0;
        border-radius: 4px;
      }

      .concept-box {
        background-color: var(--box-yellow);
        border: 1px solid var(--box-yellow-border);
        border-right: 5px solid #eab308;
        padding: 20px 25px;
        margin: 25px 0;
        border-radius: 4px;
      }

      /* Scene Style */
      .scene-box {
        background-color: #f8fafc;
        border-right: 4px solid #64748b;
        padding: 15px;
        font-style: italic;
        margin: 20px 0;
        color: #475569;
      }
      
      .scene-title {
        font-family: 'Noto Kufi Arabic', sans-serif;
        font-weight: 700;
        font-style: normal;
        margin-bottom: 10px;
        display: block;
        color: #334155;
      }

      /* Lists */
      ul, ol {
        margin-bottom: 20px;
        padding-right: 30px;
      }

      li {
        margin-bottom: 10px;
      }

      strong {
        color: #111827;
        font-weight: bold;
      }

      .divider {
        text-align: center;
        color: #9ca3af;
        margin: 50px 0;
        font-size: 24px;
        letter-spacing: 5px;
      }

      .english-term {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-weight: 600;
        color: var(--primary-blue);
        direction: ltr;
        display: inline-block;
      }

      @media (max-width: 768px) {
        body { padding: 20px; padding-top: 120px; font-size: 17px; }
        .download-container { flex-direction: column; gap: 10px; }
      }
    </style>
</head>
<body style="padding-top: 40px;">

    <!-- Download Bar -->
    

    <!-- Header Section -->
    <div class="part-title">Part III — Building a Safe Anesthesia System</div>
    <div class="part-title">الجزء الثالث — بناء نظام تخدير آمن</div>
    
                            
    <h1>CHAPTER 10 — Designing for Reliability in Anesthesia</h1>
    <div class="subtitle"><strong>الفصل العاشر — تصميم خدمات تخدير موثوقة: الإنسان، العمليات، والتقنية</strong></div>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Amiri:ital,wght@0,400;0,700;1,400&amp;family=Noto+Kufi+Arabic:wght@300;400;600;800&amp;display=swap" rel="stylesheet">
    <style>
      :root {
        --primary-blue: #2563eb;
        --light-blue-bg: #dbeafe;
        --text-color: #1f2937;
        --box-blue: #eff6ff;
        --box-blue-border: #bfdbfe;
        --box-green: #f0fdf4;
        --box-green-border: #bbf7d0;
        --box-yellow: #fefce8;
        --box-yellow-border: #fef08a;
        --box-red: #fef2f2;
        --box-red-border: #fecaca;
      }

      body {
        font-family: 'Amiri', 'Times New Roman', serif;
        line-height: 1.8;
        color: var(--text-color);
        background-color: #fff;
        max-width: 900px;
        margin: 0 auto;
        padding: 40px 60px;
        padding-top: 100px;
        box-sizing: border-box;
        text-align: right;
        font-size: 19px;
      }

      /* Download Bar Styles */
      .download-container {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        background-color: #1e3a8a;
        color: white;
        padding: 15px;
        text-align: center;
        box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        z-index: 1000;
        font-family: 'Noto Kufi Arabic', sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 20px;
      }

      .download-btn {
        background-color: #22c55e;
        color: white;
        border: none;
        padding: 8px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-family: 'Noto Kufi Arabic', sans-serif;
        font-weight: bold;
        font-size: 16px;
        text-decoration: none;
        transition: background-color 0.3s;
        display: inline-flex;
        align-items: center;
        gap: 8px;
      }

      .download-btn:hover {
        background-color: #16a34a;
      }

      @media print {
        .download-container { display: none; }
        body { padding-top: 0; }
      }

      /* Typography */
      h1 {
        font-family: 'Noto Kufi Arabic', sans-serif;
        font-weight: 800;
        color: #1e3a8a;
        text-align: center;
        font-size: 32px;
        margin-bottom: 10px;
        margin-top: 40px;
        line-height: 1.3;
      }

      .part-title {
        text-align: center;
        font-size: 18px;
        color: #6b7280;
        font-family: 'Noto Kufi Arabic', sans-serif;
        margin-bottom: 5px;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      h2 {
        font-family: 'Noto Kufi Arabic', sans-serif;
        font-weight: 600;
        color: var(--primary-blue);
        background-color: var(--light-blue-bg);
        padding: 12px 20px;
        margin-top: 50px;
        margin-bottom: 25px;
        border-right: 6px solid #1e40af;
        border-radius: 4px;
        font-size: 24px;
        page-break-after: avoid;
      }

      h3 {
        font-family: 'Noto Kufi Arabic', sans-serif;
        font-weight: 600;
        color: #1e40af;
        font-size: 20px;
        margin-top: 30px;
        margin-bottom: 15px;
        border-bottom: 2px solid #e5e7eb;
        padding-bottom: 5px;
      }

      p {
        margin-bottom: 18px;
      }

      .subtitle {
        text-align: center;
        font-size: 22px;
        color: #4b5563;
        margin-bottom: 40px;
        font-family: 'Noto Kufi Arabic', sans-serif;
        border-bottom: 1px solid #e5e7eb;
        padding-bottom: 20px;
      }

      /* Boxes Style */
      .quote-box {
        background-color: var(--box-blue);
        border: 1px solid var(--box-blue-border);
        border-right: 5px solid var(--primary-blue);
        padding: 20px 25px;
        margin: 25px 0;
        border-radius: 4px;
        color: #1e3a8a;
      }

      .alert-box {
        background-color: var(--box-red);
        border: 1px solid var(--box-red-border);
        border-right: 5px solid #ef4444;
        padding: 20px 25px;
        margin: 25px 0;
        border-radius: 4px;
      }

      .success-box {
        background-color: var(--box-green);
        border: 1px solid var(--box-green-border);
        border-right: 5px solid #22c55e;
        padding: 20px 25px;
        margin: 25px 0;
        border-radius: 4px;
      }

      .concept-box {
        background-color: var(--box-yellow);
        border: 1px solid var(--box-yellow-border);
        border-right: 5px solid #eab308;
        padding: 20px 25px;
        margin: 25px 0;
        border-radius: 4px;
      }

      /* Scene Style */
      .scene-box {
        background-color: #f8fafc;
        border-right: 4px solid #64748b;
        padding: 15px;
        font-style: italic;
        margin: 20px 0;
        color: #475569;
      }
      
      .scene-title {
        font-family: 'Noto Kufi Arabic', sans-serif;
        font-weight: 700;
        font-style: normal;
        margin-bottom: 10px;
        display: block;
        color: #334155;
      }

      /* Lists */
      ul, ol {
        margin-bottom: 20px;
        padding-right: 30px;
      }

      li {
        margin-bottom: 10px;
      }

      strong {
        color: #111827;
        font-weight: bold;
      }

      .divider {
        text-align: center;
        color: #9ca3af;
        margin: 50px 0;
        font-size: 24px;
        letter-spacing: 5px;
      }

      .english-term {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        font-weight: 600;
        color: var(--primary-blue);
        direction: ltr;
        display: inline-block;
      }

      @media (max-width: 768px) {
        body { padding: 20px; padding-top: 120px; font-size: 17px; }
        .download-container { flex-direction: column; gap: 10px; }
      }
    </style>
</head>
<body style="padding-top: 40px;">

    <h2>Chapter aims</h2>
    <h3>أهداف الفصل</h3>

    <div class="concept-box">
            <li>تصميم <span class="english-term">Staffing</span> (التغطية والكوادر) و<span class="english-term">Supervision</span> (الإشراف) و<span class="english-term">Escalation pathways</span> (مسارات التصعيد/الاستدعاء) بما يطابق تعقيد الحالات وكفاءة الفريق وحجم العمل، مع حماية النظام من مخاطر الإرهاق.</li>
            
            <li>تعريف أدوار السلامة بوضوح: <span class="english-term">Anesthesia director/department lead</span> (مدير/رئيس قسم التخدير)، <span class="english-term">Safety officer</span> (مسؤول السلامة)، <span class="english-term">Quality lead/QM officer</span> (قائد الجودة/مسؤول إدارة الجودة) وربطها بالحوكمة والبيانات.</li>
            
            <li>استخدام التقنية كأداة موثوقية: <span class="english-term">Standards</span> (معايير)، <span class="english-term">Checklists</span> (قوائم تحقق)، <span class="english-term">Monitoring</span> (مراقبة)، و<span class="english-term">IT-enabled learning</span> (تعلّم مدعوم بتقنية المعلومات) بدل افتراض أن الأجهزة “تضمن” السلامة بذاتها.</li>
        </ul>
    </div>

    <div class="divider">***</div>

    <h2>10.1 Reliability in Anesthesia: What does it mean and why must it be designed?</h2>
    <h3>10.1 الموثوقية في التخدير: ما معناها ولماذا يجب أن تُصمَّم؟</h3>

    <p>التخدير لا يُقدَّم في فراغ؛ بل داخل نظام محيط متشابك: غرفة عمليات، إفاقة (PACU)، عناية، ولادة، و<span class="english-term">NORA (Non-Operating Room Anesthesia)</span> — التخدير خارج غرفة العمليات. والمرضى ليسوا نسخة واحدة: هناك من لديه هشاشة قلبية، وهناك الحامل، والطفل، والمسن، والمريض المصاب بالسمنة أو توقف التنفس أثناء النوم… وكلٌّ منهم يفرض سياقًا مختلفًا.</p>
    
    <p><strong><span class="english-term">Reliability</span> (الموثوقية/الاعتمادية) هنا تعني:</strong> أن يقدم القسم أداءً يمكن الوثوق به عند اللحظات الحرجة، وليس فقط “نتائج جيدة أغلب الوقت”.</p>
    
    <p>اللحظات الحرجة في التخدير معروفة لكل من عاشها:</p>
    <ul>
        <li><span class="english-term">Induction</span> (الاستقراء/بداية التخدير)</li>
        <li><span class="english-term">Airway management</span> (تأمين مجرى الهواء)</li>
        <li><span class="english-term">Hemodynamic instability</span> (عدم الاستقرار الديناميكي الدموي)</li>
        <li><span class="english-term">Emergence</span> (الإنهاء/الاستفاقة)</li>
        <li><span class="english-term">Transfer &amp; handoff</span> (النقل والتسليم والاستلام)</li>
    </ul>

    <div class="alert-box">
        <strong>ومن “قواعد التفكير” التي تعلمتها عبر السنوات:</strong> في التخدير، ما ينجح 99 مرة قد يفشل في المرة رقم 100… إذا كانت المرة رقم 100 في بيئة ضغط أو نقص كوادر أو انقطاع متكرر.
    </div>

    <h3>10.1.1 Reliability is a system property… not a personal trait</h3>
    <h3>10.1.1 الموثوقية خاصية نظام… وليست صفة شخصية</h3>
    
    <p>أحيانًا نمدح طبيبًا فنقول: “فلان حريص، فلان انتباهه خارق”. هذا جميل، لكنه ليس نظامًا.</p>
    <p>القسم الموثوق لا يبني أمانه على “نجم واحد”، بل يصمّم:</p>
    <ul>
        <li><span class="english-term">Predictable processes</span> (عمليات متوقعة وثابتة) = <span class="english-term">Standard work</span> (عمل معياري)</li>
        <li><span class="english-term">Disciplined supervision &amp; escalation</span> (إشراف وتصعيد منضبطان)</li>
        <li><span class="english-term">Measurement &amp; feedback loops</span> (قياس وحلقات تغذية راجعة)</li>
        <li><span class="english-term">Technology configured for early detection</span> (تقنية مضبوطة لاكتشاف التدهور مبكرًا)</li>
    </ul>

    <div class="scene-box">
        <span class="scene-title">لمسة شخصية</span>
        <p>بعد 25 عامًا في التخدير، لا أخاف من تعقيد الحالة بقدر خوفي من “تشتت النظام”.</p>
        <p>المريض المعقّد يمكن السيطرة عليه إذا كان النظام واضحًا.</p>
        <p>أما الحالة البسيطة داخل نظام فوضوي… فهي التي تفاجئك.</p>
    </div>

    <div class="divider">***</div>

    <h2>10.2 Standardization vs Flexibility: “Standardize the process… Individualize the decision”</h2>
    <h3>10.2 التوحيد القياسي مقابل المرونة: “وحِّد العملية… وفصِّل القرار للمريض”</h3>


<!-- Standardization vs Flexibility Visual - Balance Design -->
<div style="margin: 4rem 0; position: relative;">
    <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 4rem 3rem; border-radius: 30px; box-shadow: 0 20px 60px rgba(102, 126, 234, 0.4); position: relative; overflow: hidden;">
        
        <!-- Title -->
        <div style="text-align: center; margin-bottom: 3.5rem; position: relative; z-index: 1;">
            <div style="font-size: 4.5rem; color: white; margin-bottom: 1rem;"><i class="fas fa-balance-scale"></i></div>
            <h2 style="color: white; font-size: 2.4rem; margin-bottom: 1rem; text-shadow: 0 4px 8px rgba(0,0,0,0.3); font-weight: 800;">
                التوحيد القياسي مقابل المرونة
            </h2>
            <h3 style="color: rgba(255,255,255,0.95); font-size: 1.9rem; margin: 0; text-shadow: 0 2px 4px rgba(0,0,0,0.2);">
                Standardization vs Flexibility
            </h3>
        </div>
        
        <!-- Main Balance Grid -->
        <div style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 2rem; align-items: center; position: relative; z-index: 1; margin-bottom: 3rem;">
            
            <!-- Left: Standardization -->
            <div style="background: white; padding: 3rem; border-radius: 25px; box-shadow: 0 15px 40px rgba(0,0,0,0.2); transition: all 0.4s; border: 4px solid #4facfe;" onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 20px 50px rgba(0,0,0,0.3)'" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 15px 40px rgba(0,0,0,0.2)'">
                <div style="text-align: center;">
                    <div style="font-size: 4rem; color: #4facfe; margin-bottom: 1.5rem;"><i class="fas fa-cogs"></i></div>
                    <h3 style="color: #4facfe; font-size: 1.8rem; margin-bottom: 1rem; font-weight: 800;">Standardization</h3>
                    <h4 style="color: #00f2fe; font-size: 1.5rem; margin-bottom: 2rem;">التوحيد القياسي</h4>
                    <div style="background: #e0f2fe; padding: 2rem; border-radius: 15px; border-right: 5px solid #4facfe;">
                        <p style="color: #333; margin: 0 0 1.5rem 0; font-size: 1.1rem; line-height: 2; font-weight: 600;">
                            <strong style="color: #4facfe;">What:</strong> Best known method for a step<br>
                            أفضل طريقة معروفة لخطوة ما
                        </p>
                        <p style="color: #333; margin: 0; font-size: 1.1rem; line-height: 2; font-weight: 600;">
                            <strong style="color: #4facfe;">Why:</strong> Reduce unnecessary variation<br>
                            تقليل التباين غير الضروري
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- Center: Balance Arrow -->
            <div style="display: flex; flex-direction: column; align-items: center; gap: 1rem;">
                <div style="font-size: 3rem; color: white; animation: pulse 2s infinite;"><i class="fas fa-exchange-alt"></i></div>
                <div style="writing-mode: vertical-rl; transform: rotate(180deg); color: white; font-size: 1.2rem; font-weight: 700; letter-spacing: 3px;">BALANCE</div>
            </div>
            
            <!-- Right: Flexibility -->
            <div style="background: white; padding: 3rem; border-radius: 25px; box-shadow: 0 15px 40px rgba(0,0,0,0.2); transition: all 0.4s; border: 4px solid #f093fb;" onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 20px 50px rgba(0,0,0,0.3)'" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 15px 40px rgba(0,0,0,0.2)'">
                <div style="text-align: center;">
                    <div style="font-size: 4rem; color: #f093fb; margin-bottom: 1.5rem;"><i class="fas fa-user-md"></i></div>
                    <h3 style="color: #f093fb; font-size: 1.8rem; margin-bottom: 1rem; font-weight: 800;">Flexibility</h3>
                    <h4 style="color: #f5576c; font-size: 1.5rem; margin-bottom: 2rem;">المرونة</h4>
                    <div style="background: #fce7f3; padding: 2rem; border-radius: 15px; border-right: 5px solid #f093fb;">
                        <p style="color: #333; margin: 0 0 1.5rem 0; font-size: 1.1rem; line-height: 2; font-weight: 600;">
                            <strong style="color: #f093fb;">What:</strong> Allowed variation<br>
                            تباين مسموح
                        </p>
                        <p style="color: #333; margin: 0; font-size: 1.1rem; line-height: 2; font-weight: 600;">
                            <strong style="color: #f093fb;">Why:</strong> Clinically justified by patient/context<br>
                            مبرر سريرياً بالمريض/السياق
                        </p>
                    </div>
                </div>
            </div>
            
        </div>
        
        <!-- Golden Rule -->
        <div style="background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%); padding: 2.5rem; border-radius: 25px; text-align: center; position: relative; z-index: 1; box-shadow: 0 10px 30px rgba(255, 215, 0, 0.4); border: 3px solid #ffd700;">
            <div style="font-size: 3rem; color: #333; margin-bottom: 1rem;"><i class="fas fa-crown"></i></div>
            <p style="color: #333; margin: 0; font-size: 1.4rem; line-height: 2.2; font-weight: 800;">
                <span style="color: #d97706;">Golden Rule:</span> Standardize the process… Individualize the patient<br>
                <span style="color: #ca8a04;">القاعدة الذهبية:</span> وحّد العملية… وفصّل القرار للمريض
            </p>
        </div>
        
    </div>
</div>

    <p>يخطئ من يظن أن <span class="english-term">Standardization</span> (التوحيد القياسي) يعني جمودًا أو قتلًا للحسّ السريري.</p>
    <p>في الأنظمة عالية الأداء، يحدث العكس تمامًا: نحن نُوحّد ما يجب أن يكون “متوقعًا” و”قابلًا للتدقيق”، لكي نترك لعقل الطبيب مساحة للمرونة حيث يجب أن تكون المرونة فعلًا.</p>
    
    <p><strong>تعريف عملي للقسم:</strong></p>
    <ul>
        <li><strong><span class="english-term">Standardization</span> (التوحيد القياسي):</strong> أفضل طريقة معروفة لخطوة ما، تقلل التباين غير الضروري وتُسهّل كشف الخطأ.</li>
        <li><strong><span class="english-term">Flexibility</span> (المرونة):</strong> تباين مسموح لأنه مبرر سريريًا بسبب اختلاف المريض/السياق.</li>
    </ul>
    
    <div class="success-box">
        <strong>القاعدة الذهبية:</strong> <span class="english-term">Standardize the process, individualize the patient</span><br>
        “وحّد العملية… وفصّل القرار للمريض.”
    </div>

    <h3>10.2.1 What to standardize? (High-risk steps with a “right answer”)</h3>
    <h3>10.2.1 ماذا نُوحِّد؟ (خطوات عالية الخطورة ذات “إجابة صحيحة” غالبًا)</h3>
    <p>وحّد الخطوات التي تمتاز بـ:</p>
    <ul>
        <li><span class="english-term">High harm potential</span> (ضرر محتمل عالٍ)</li>
        <li><span class="english-term">Frequent repetition</span> (تكرار يومي)</li>
        <li><span class="english-term">Known failure modes</span> (أنماط فشل معروفة)</li>
    </ul>

    <p><strong>أمثلة تخديرية عملية (يمكنك اعتمادها كمعايير قسم):</strong></p>
    <ul>
        <li><strong><span class="english-term">Pre-anesthesia evaluation</span> (التقييم قبل التخدير):</strong> عناصر إلزامية موحّدة: تاريخ مرضي، حساسية، صيام، تقييم مجرى الهواء، مخاطر نزف/شفط، خطة بديلة.</li>
        <li><strong><span class="english-term">Anesthesia machine check</span> (فحص جهاز التخدير):</strong> خطوات ثابتة + توثيق زمني (<span class="english-term">auditability</span>).</li>
        <li><strong><span class="english-term">Medication preparation &amp; labeling</span> (تحضير الأدوية ووسمها):</strong> ترتيب صينية ثابت، ملصقات، وقاعدة “لا سرنجة بلا ملصق”.</li>
        <li><strong><span class="english-term">Standard monitoring</span> (المراقبة القياسية):</strong> <span class="english-term">Oxygenation</span> (الأكسجة)، <span class="english-term">Ventilation</span> (التهوية)، <span class="english-term">Circulation</span> (الدورة)، <span class="english-term">Temperature</span> (الحرارة) + ضغط كل 5 دقائق كحد أدنى.</li>
        <li><strong><span class="english-term">Handoff &amp; post-anesthesia documentation</span> (التسليم والاستلام والتوثيق بعد التخدير):</strong> “حد أدنى” موحد للمعلومات + مسؤولية واضحة لمن يُكمل التوثيق.</li>
    </ul>

    <h3>10.2.2 Where is flexibility appropriate? (Patient and context decisions)</h3>
    <h3>10.2.2 أين تكون المرونة مناسبة؟ (قرارات مرتبطة بالمريض والسياق)</h3>
    <p>المرونة مطلوبة حين:</p>
    <ul>
        <li>يختلف فسيولوجيًا: OB (التوليد)، Pediatrics (الأطفال)، Frailty (الهشاشة)، أمراض قلبية شديدة…</li>
        <li>تختلف العملية الجراحية ومتطلباتها</li>
        <li>يختلف المكان: OR vs NORA</li>
    </ul>
    <p>لكن المرونة تصبح خطرة عندما تتحول إلى <span class="english-term">Workarounds</span> (تحايلات) تتجاوز الدفاعات.</p>
    
    <div class="alert-box">
        <strong>القاعدة التنفيذية:</strong> المرونة مسموحة فقط إذا كانت: <span class="english-term">Explicit</span> (معلنة)، <span class="english-term">Justified</span> (مبررة)، وما زالت محمية بحواجز السلامة (مراقبة/تحقق/تصعيد).
    </div>

    <div class="scene-box">
        <span class="scene-title">قصة قصيرة</span>
        <p>في أحد الأيام، كانت لدينا حالة ولادة قيصرية عاجلة مع مريضة لديها سمنة وOSA واحتمال صعوبة مجرى الهواء.</p>
        <p>المرونة هنا لم تكن “مزاجًا”—بل ضرورة: خطة استقراء تختلف، أدوات صعوبة الهواء جاهزة، ودعوة مبكرة للدعم.</p>
        <p>لكن ما كان غير مسموح هو التنازل عن فحص الجهاز أو ترك سرنجات دون ملصق بحجة الاستعجال.</p>
        <p>هنا يتضح الفرق بين “مرونة سريرية” و”فوضى تشغيلية”.</p>
    </div>

    <div class="divider">***</div>

    <h2>10.3 The People: Staffing, Competency, Supervision, and Fatigue Risks</h2>
    <h3>10.3 الإنسان: التغطية، الكفاءة، الإشراف، ومخاطر الإرهاق</h3>
    
    <p>الخدمة الموثوقة تبدأ من الإنسان: تدريب صحيح، كفاءة موثّقة، وعدد كافٍ للرد على الروتين والطوارئ.</p>

    <h3>10.3.1 Safe staffing is a design decision… not a “schedule problem”</h3>
    <h3>10.3.1 التغطية الآمنة قرار تصميم… وليس “مشكلة جدول”</h3>
    <p>الجدول ليس هدفًا بذاته؛ الهدف هو <span class="english-term">Safe capacity</span> (سعة آمنة).</p>
    <p>الخطة الآمنة تُبنى على:</p>
    <ul>
        <li><span class="english-term">Case complexity</span> (تعقيد الحالات)</li>
        <li><span class="english-term">Competency mix</span> (مزيج الكفاءات)</li>
        <li><span class="english-term">Surgical volume</span> (حجم العمل الجراحي)</li>
    </ul>
    <p>وتشمل تحديد: الحد الأدنى الآمن (<span class="english-term">Minimum safe baseline</span>)، كيف نزيد الطاقم عند زيادة الضغط، توزيع المناوبة (in-house / on-call)، من يغطي NORA، ومن يبقى لتغطية OR والطوارئ.</p>

    <div class="scene-box">
        <span class="scene-title">لمسة</span>
        <p>أكثر ما يرهق الطبيب ليس كثرة الحالات فقط… بل كثرة “المفاجآت التنظيمية”: غرفة غير جاهزة، أدوات ناقصة، وطلب NORA بلا تجهيز.</p>
        <p>هذه ليست “طبيعة العمل”—هذه عيوب تصميم.</p>
    </div>

    <h3>10.3.2 Fatigue is a predictable risk: Design defenses into the staffing model</h3>
    <h3>10.3.2 الإرهاق خطر متوقع: صمّم دفاعات داخل نموذج التغطية</h3>
    <p><span class="english-term">Fatigue</span> (الإرهاق) ليس ضعفًا أخلاقيًا؛ إنه فسيولوجيا. وعندما نقبل الإرهاق كأمر طبيعي، فنحن نقبل الخطأ كأمر طبيعي.</p>
    
    <p><strong>دفاعات عملية داخل نموذج العمل:</strong></p>
    <ul>
        <li>حدود معقولة لساعات العمل المتواصل</li>
        <li>آلية إغاثة (<span class="english-term">Relief strategy</span>) إذا تجاوز الطبيب 12 ساعة أو دخل في حالات طوارئ متتابعة</li>
        <li>توزيع مناوبات يمنع تكرار قلب الساعة البيولوجية بشكل قاسٍ</li>
        <li>ثقافة تسمح للطبيب أن يقول: “أنا غير آمن للاستمرار” دون إذلال</li>
    </ul>

    <div class="scene-box">
        <span class="scene-title">قصة قصيرة</span>
        <p>في نهاية مناوبة طويلة، اكتشفت أنني بدأت أبحث عن أشياء أعرف مكانها عادةً.</p>
        <p>هذا ليس “نسيانًا”—هذه علامة خطر.</p>
        <p>من يومها أصبحت أؤمن أن حماية الطبيب من الإرهاق هي حماية للمريض قبل أي شيء.</p>
    </div>

    <h3>10.3.3 Supervision: Clarity prevents silent risk</h3>
    <h3>10.3.3 الإشراف (Supervision): الوضوح يمنع الخطر الصامت</h3>
    <p>الإشراف ليس “توقيعًا”؛ الإشراف هو:</p>
    <ul>
        <li>من المسؤول لحظة التعقيد؟</li>
        <li>من يصل خلال دقائق؟</li>
        <li>ما الذي يُفعّل التصعيد؟</li>
        <li>كيف نغطي أثناء الاستراحات؟</li>
    </ul>
    <div class="success-box">
        <strong>قاعدة قسمية:</strong> الإشراف يجب أن يكون “مرئيًا وعمليًا”، لا مكتوبًا فقط.
    </div>

    <div class="divider">***</div>

    <h2>10.4 Escalation pathways: How the system responds when the plan fails?</h2>
    <h3>10.4 مسارات التصعيد (Escalation pathways): كيف يستجيب النظام عندما تفشل الخطة؟</h3>
    
    <p>النظام الآمن لا يفترض أن كل شيء سيجري بسلاسة؛ بل يفترض أن “غير المتوقع” سيأتي: هبوط ضغط، صعوبة مجرى هواء، تشنج قصبي، نزف، <span class="english-term">LAST</span> (سمّية المخدر الموضعي)، تأخر استيقاظ، تدهور في الإفاقة…</p>
    <p><span class="english-term">Reliability</span> (الموثوقية) تتحقق عندما يكون التصعيد:</p>
    <ul>
        <li>سريعًا</li>
        <li>واضحًا</li>
        <li>مقبولًا ثقافيًا (<span class="english-term">Calling early is praised</span> — الاتصال المبكر يُمدح)</li>
    </ul>

    <h3>10.4.1 Escalation ladder — A practical department standard</h3>
    <h3>10.4.1 سُلَّم التصعيد (Escalation ladder) — معيار قسم عملي</h3>
    <p>اصنع “سلمًا مكتوبًا” ينطبق على OR وNORA وICU procedures والولادة:</p>

<!-- Escalation Ladder Visual - Staircase Upward Design -->
<div style="margin: 4rem 0; position: relative;">
    <div style="background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); padding: 4rem 3rem; border-radius: 30px; box-shadow: 0 20px 60px rgba(250, 112, 154, 0.4); position: relative; overflow: hidden;">
        
        <!-- Title -->
        <div style="text-align: center; margin-bottom: 3rem; position: relative; z-index: 1;">
            <div style="font-size: 4.5rem; color: white; margin-bottom: 1rem;"><i class="fas fa-level-up-alt"></i></div>
            <h2 style="color: white; font-size: 2.4rem; margin-bottom: 1rem; text-shadow: 0 4px 8px rgba(0,0,0,0.3); font-weight: 800;">
                سُلَّم التصعيد - معيار قسم عملي
            </h2>
            <h3 style="color: rgba(255,255,255,0.95); font-size: 1.9rem; margin: 0; text-shadow: 0 2px 4px rgba(0,0,0,0.2);">
                Escalation Ladder - Department Standard
            </h3>
        </div>
        
        <!-- Escalation Steps (من أسفل لأعلى) -->
        <div style="display: grid; gap: 1.5rem; position: relative; z-index: 1;">
            
            <!-- Step 5: Post-Event (TOP) -->
            <div style="background: white; padding: 2.5rem 2.5rem 2.5rem 5.5rem; border-radius: 20px; border-right: 8px solid #8b5cf6; box-shadow: 0 12px 35px rgba(139, 92, 246, 0.4); transition: all 0.3s; position: relative;" onmouseover="this.style.transform='translateX(-15px) scale(1.02)'; this.style.boxShadow='0 15px 45px rgba(139, 92, 246, 0.5)'" onmouseout="this.style.transform='translateX(0) scale(1)'; this.style.boxShadow='0 12px 35px rgba(139, 92, 246, 0.4)'">
                <div style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); background: #8b5cf6; color: white; width: 65px; height: 65px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: 900; box-shadow: 0 8px 20px rgba(139, 92, 246, 0.4);">5</div>
                <h4 style="color: #8b5cf6; font-size: 1.5rem; margin: 0 0 1rem 0; font-weight: 800;"><i class="fas fa-sync-alt"></i> Post-Event Path / مسار ما بعد الحدث</h4>
                <p style="color: #555; margin: 0; font-size: 1.1rem; line-height: 2; font-weight: 600;">
                    Report ← Review ← Learning ← System change<br>
                    إبلاغ ← مراجعة ← تعلم ← تغيير نظامي
                </p>
            </div>
            
            <!-- Step 4: Hospital Escalation -->
            <div style="background: white; padding: 2.5rem 2.5rem 2.5rem 5.5rem; border-radius: 20px; border-right: 8px solid #ef4444; box-shadow: 0 12px 35px rgba(239, 68, 68, 0.4); transition: all 0.3s; position: relative; margin-left: 2rem;" onmouseover="this.style.transform='translateX(-15px) scale(1.02)'; this.style.boxShadow='0 15px 45px rgba(239, 68, 68, 0.5)'" onmouseout="this.style.transform='translateX(0) scale(1)'; this.style.boxShadow='0 12px 35px rgba(239, 68, 68, 0.4)'">
                <div style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); background: #ef4444; color: white; width: 65px; height: 65px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: 900; box-shadow: 0 8px 20px rgba(239, 68, 68, 0.4);">4</div>
                <h4 style="color: #ef4444; font-size: 1.5rem; margin: 0 0 1rem 0; font-weight: 800;"><i class="fas fa-hospital"></i> Hospital Escalation / تصعيد المستشفى</h4>
                <p style="color: #555; margin: 0; font-size: 1.1rem; line-height: 2; font-weight: 600;">
                    RRT/Code Blue for severe deterioration<br>
                    فريق الاستجابة السريعة/كود أزرق للتدهور الشديد
                </p>
            </div>
            
            <!-- Step 3: On-Call Consultant -->
            <div style="background: white; padding: 2.5rem 2.5rem 2.5rem 5.5rem; border-radius: 20px; border-right: 8px solid #f59e0b; box-shadow: 0 12px 35px rgba(245, 158, 11, 0.4); transition: all 0.3s; position: relative; margin-left: 4rem;" onmouseover="this.style.transform='translateX(-15px) scale(1.02)'; this.style.boxShadow='0 15px 45px rgba(245, 158, 11, 0.5)'" onmouseout="this.style.transform='translateX(0) scale(1)'; this.style.boxShadow='0 12px 35px rgba(245, 158, 11, 0.4)'">
                <div style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); background: #f59e0b; color: white; width: 65px; height: 65px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: 900; box-shadow: 0 8px 20px rgba(245, 158, 11, 0.4);">3</div>
                <h4 style="color: #f59e0b; font-size: 1.5rem; margin: 0 0 1rem 0; font-weight: 800;"><i class="fas fa-user-tie"></i> On-Call Consultant / الاستشاري المناوب</h4>
                <p style="color: #555; margin: 0; font-size: 1.1rem; line-height: 2; font-weight: 600;">
                    High severity, repeated failure, resource shortage<br>
                    شدة عالية، فشل متكرر، نقص موارد
                </p>
            </div>
            
            <!-- Step 2: Charge/Supervising -->
            <div style="background: white; padding: 2.5rem 2.5rem 2.5rem 5.5rem; border-radius: 20px; border-right: 8px solid #3b82f6; box-shadow: 0 12px 35px rgba(59, 130, 246, 0.4); transition: all 0.3s; position: relative; margin-left: 6rem;" onmouseover="this.style.transform='translateX(-15px) scale(1.02)'; this.style.boxShadow='0 15px 45px rgba(59, 130, 246, 0.5)'" onmouseout="this.style.transform='translateX(0) scale(1)'; this.style.boxShadow='0 12px 35px rgba(59, 130, 246, 0.4)'">
                <div style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); background: #3b82f6; color: white; width: 65px; height: 65px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: 900; box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4);">2</div>
                <h4 style="color: #3b82f6; font-size: 1.5rem; margin: 0 0 1rem 0; font-weight: 800;"><i class="fas fa-user-shield"></i> Charge/Supervising / طبيب الإشراف</h4>
                <p style="color: #555; margin: 0; font-size: 1.1rem; line-height: 2; font-weight: 600;">
                    Responds immediately (named each shift)<br>
                    يستجيب فوراً (مسمّى كل شفت)
                </p>
            </div>
            
            <!-- Step 1: Primary Provider (BASE) -->
            <div style="background: white; padding: 2.5rem 2.5rem 2.5rem 5.5rem; border-radius: 20px; border-right: 8px solid #10b981; box-shadow: 0 12px 35px rgba(16, 185, 129, 0.4); transition: all 0.3s; position: relative; margin-left: 8rem;" onmouseover="this.style.transform='translateX(-15px) scale(1.02)'; this.style.boxShadow='0 15px 45px rgba(16, 185, 129, 0.5)'" onmouseout="this.style.transform='translateX(0) scale(1)'; this.style.boxShadow='0 12px 35px rgba(16, 185, 129, 0.4)'">
                <div style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); background: #10b981; color: white; width: 65px; height: 65px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; font-weight: 900; box-shadow: 0 8px 20px rgba(16, 185, 129, 0.4);">1</div>
                <h4 style="color: #10b981; font-size: 1.5rem; margin: 0 0 1rem 0; font-weight: 800;"><i class="fas fa-user-md"></i> Primary Provider / الطبيب الأساسي</h4>
                <p style="color: #555; margin: 0; font-size: 1.1rem; line-height: 2; font-weight: 600;">
                    Asks for help early (not late)<br>
                    يطلب المساعدة مبكراً (ليس متأخراً)
                </p>
            </div>
            
        </div>
        
        <!-- Bottom Note -->
        <div style="background: rgba(255,255,255,0.98); padding: 2.5rem; border-radius: 25px; text-align: center; margin-top: 3rem; position: relative; z-index: 1; box-shadow: 0 10px 30px rgba(0,0,0,0.2);">
            <div style="font-size: 3rem; color: #fa709a; margin-bottom: 1rem;"><i class="fas fa-shield-alt"></i></div>
            <p style="color: #333; margin: 0; font-size: 1.3rem; line-height: 2.2; font-weight: 700;">
                <strong style="color: #fa709a;">This ladder is governance</strong> — It prevents lost responsibility in night and pressure<br>
                <strong style="color: #fee140; text-shadow: 0 1px 3px rgba(0,0,0,0.3);">هذا السلم حوكمة</strong> — يمنع ضياع المسؤولية في الليل والضغط
            </p>
        </div>
        
    </div>
</div>

    <ol>
        <li>الطبيب/الممارس الأساسي يطلب المساعدة مبكرًا (ليس متأخرًا).</li>
        <li><span class="english-term">Charge / supervising anesthesiologist</span> (طبيب إشراف/مسؤول الشفت) يستجيب فورًا (مسمّى كل شفت).</li>
        <li><span class="english-term">On-call consultant / department lead</span> (الاستشاري المناوب/رئيس القسم) للحالات عالية الشدة أو الفشل المتكرر أو نقص الموارد.</li>
        <li>تصعيد المستشفى: <span class="english-term">RRT/Code Blue</span> (فريق الاستجابة السريعة/كود أزرق) عند التدهور الشديد.</li>
        <li>مسار ما بعد الحدث: <span class="english-term">Report</span> (إبلاغ) ← <span class="english-term">Review</span> (مراجعة) ← <span class="english-term">Learning</span> (تعلم) ← <span class="english-term">System change</span> (تغيير نظامي).</li>
    </ol>
    <p>هذا السلم ليس علاجيًا فقط؛ هو “حوكمة”: يمنع ضياع المسؤولية في الليل والضغط.</p>

    <h3>10.4.2 Escalation needs realistic time expectations (Time-to-response)</h3>
    <h3>10.4.2 التصعيد يحتاج توقعات زمنية واقعية (Time-to-response)</h3>
    <p>اكتب أهدافًا زمنية حسب بيئتكم (مثال: “استجابة داخلية خلال X دقائق”). ثم اسأل السؤال الحاسم: هل نموذج التغطية الحالي قادر فعلًا على تحقيق هذا الهدف؟ إذا لا… فالهدف على الورق لا يحمي أحدًا.</p>

    <div class="scene-box">
        <span class="scene-title">قصة قصيرة</span>
        <p>في إحدى حالات NORA، حدث تدهور مفاجئ.</p>
        <p>الفرق بين نتيجة جيدة ونتيجة سيئة كان “دقيقة أو دقيقتين” فقط—والدقيقة لا تُشترى وقت الأزمة.</p>
        <p>هي تُصمَّم قبل الأزمة: من هو الشخص؟ أين موقعه؟ كيف تصل له؟ من يحمل العربة؟ ما الرقم؟ ما البديل؟</p>
    </div>

    <div class="divider">***</div>

    <h2>10.5 Processes: Standard work, Checklists, and “Rare justified deviation”</h2>
    <h3>10.5 العمليات (Processes): العمل المعياري، قوائم التحقق، و“انحراف نادر مع تبرير”</h3>
    <p>العمليات هي المكان الذي تتحول فيه السلامة من “مبدأ” إلى “سلوك يومي”.</p>

    <h3>10.5.1 Why standard work increases freedom and reduces bureaucracy?</h3>
    <h3>10.5.1 لماذا العمل المعياري يزيد الحرية ولا يزيد البيروقراطية؟</h3>
    <p><span class="english-term">Standard work</span> (العمل المعياري) ليس ورقًا. هو:</p>
    <ul>
        <li>تقليل <span class="english-term">Cognitive load</span> (العبء المعرفي)</li>
        <li>منع النسيان تحت الضغط</li>
        <li>خلق توقع مشترك: “كيف نعمل هنا؟”</li>
    </ul>
    <p>الحرية الحقيقية للطبيب ليست أن يخترع خطوات كل مرة، بل أن يركّز على المريض لأن النظام يحمل عنه الروتين الحرج.</p>

    <h3>10.5.2 Checklists: A safety barrier, not a substitute for expertise</h3>
    <h3>10.5.2 قوائم التحقق (Checklists): حاجز أمان لا بديل عن الخبرة</h3>
    <p><span class="english-term">Checklist</span> (قائمة تحقق) هي <span class="english-term">Cognitive forcing function</span> (آلية قسرية معرفية) تمنع “تجاوز صامت”. مثل: فحص جهاز التخدير قبل كل مريض، أو قائمة أدوية عالية الخطورة.</p>

    <h3>10.5.3 When is deviation allowed? And how is it documented?</h3>
    <h3>10.5.3 متى يُسمح بالانحراف عن البروتوكول؟ وكيف يُوثَّق؟</h3>
    <p>الانحراف يجب أن يكون: نادرًا، مبررًا، موثقًا.</p>
    <p><strong>صياغة تشغيلية واضحة:</strong></p>
    <ul>
        <li>إذا انحرفت: اذكر السبب (عامل خاص بالمريض/تقييد جهاز/تهديد حياة عاجل).</li>
        <li>إذا تكرر الانحراف: إما البروتوكول غير واقعي، أو النظام يدفع الناس إلى <span class="english-term">Workarounds</span>. وهنا يصبح الأمر مشروع تحسين جودة.</li>
    </ul>
    
    <div class="scene-box">
        <span class="scene-title">لمسة</span>
        <p>أحيانًا يظن البعض أن توثيق سبب الانحراف “اتهام”.</p>
        <p>في الحقيقة هو “جسر تعلم”: إما أن نُصلح البروتوكول، أو نُصلح البيئة التي أجبرت الطبيب على تجاوز الدفاعات.</p>
    </div>

    <div class="divider">***</div>

    <h2>10.6 Technology: Turn devices into defenses… not assumptions</h2>
    <h3>10.6 التقنية (Technology): حوِّل الأجهزة إلى دفاعات… لا إلى افتراضات</h3>
    <p>الأجهزة قد تمنع ضررًا، وقد تصنع ضررًا إذا كانت: غير موحدة، غير مصانة، إنذاراتها مزعجة بلا معنى، أو يُستخدم عليها “تجاوز” دائم.</p>

    <h3>10.6.1 Layered defenses</h3>
    <h3>10.6.1 دفاعات متعددة الطبقات (Layered defenses)</h3>
    <p>السلامة في التخدير تاريخيًا قائمة على طبقات:</p>
    <ul>
        <li>أنظمة توصيل الغازات</li>
        <li>حساسات الأكسجين</li>
        <li>إنذارات</li>
        <li>مراقبة أكسجة وتهوية</li>
    </ul>
    <p>الهدف: فشل طبقة واحدة لا يتحول إلى كارثة لأن هناك طبقة أخرى تلتقطه.</p>

    <h3>10.6.2 Monitoring standards: Global detection of deterioration</h3>
    <h3>10.6.2 معايير المراقبة (Monitoring standards): كشف التدهور عالميًا</h3>
    <p>المعيار العملي الذي يجب أن يظل حاضرًا دائمًا:</p>
    <ul>
        <li>تقييم مستمر لـ <span class="english-term">Oxygenation</span> (الأكسجة)</li>
        <li><span class="english-term">Ventilation</span> (التهوية)</li>
        <li><span class="english-term">Circulation</span> (الدورة)</li>
        <li><span class="english-term">Temperature</span> (الحرارة)</li>
        <li>قياس ضغط متكرر لا يقل عن كل 5 دقائق كحد أدنى</li>
        <li>وجود إنذارات فعالة ومعقولة</li>
    </ul>
    <p>لكن وجود المراقبة لا يكفي؛ الأهم: <span class="english-term">Response</span> (الاستجابة). وهنا يعود دور <span class="english-term">Human factors</span> (العوامل البشرية): إدارة الإنذارات وتجنب <span class="english-term">Alarm fatigue</span> (إرهاق الإنذارات) واستجابة منظمة.</p>

    <h3>10.6.3 IT systems: Make data “learn”, not just “store”</h3>
    <h3>10.6.3 أنظمة المعلومات (IT systems): اجعل البيانات “تتعلم” لا “تُخزَّن”</h3>
    <p>القسم الموثوق يستخدم الـ IT لكي:</p>
    <ul>
        <li>يرصد الأنماط (مثل تكرار هبوط ضغط في موقع معين)</li>
        <li>يدعم الالتزام (<span class="english-term">prompts</span> للتوثيق)</li>
        <li>يبني حلقات تعلم (<span class="english-term">learning loops</span>)</li>
    </ul>
    <p>لا نريد “بيانات نائمة”، بل “بيانات تُنبه وتُعلّم”.</p>

    <div class="scene-box">
        <span class="scene-title">قصة قصيرة</span>
        <p>عندما بدأنا نراجع بيانات <span class="english-term">hypotension</span> على مدى شهور، اكتشفنا أن المشكلة ليست “طبيبًا بعينه” بل “مرحلة بعينها”: لحظة الاستقراء في غرفة محددة ذات سير عمل مزدحم.</p>
        <p>هذا الاكتشاف لم يكن ممكنًا بالانطباع، بل بالقياس.</p>
        <p>والقياس هنا لم يكن لومًا… بل بصيرة.</p>
    </div>

    <div class="divider">***</div>

    <h2>10.7 Roles and Responsibilities: Who builds reliability and who maintains it?</h2>
    <h3>10.7 الأدوار والمسؤوليات: من يبني الموثوقية ومن يحافظ عليها؟</h3>
    <p>الموثوقية تنهار حين تكون المسؤولية “عائمة”.</p>

    <h3>10.7.1 Department lead / Anesthesia director: System responsibility</h3>
    <h3>10.7.1 رئيس/مدير قسم التخدير (Department lead / Anesthesia director): مسؤولية النظام</h3>
    <p>هذا الدور ليس لقبًا شرفيًا؛ هو مسؤولية تشغيلية: تخطيط الخدمة، توحيد الممارسة، الإشراف على المواقع داخل المستشفى وخارج OR، متابعة الجودة ضمن برنامج المستشفى.</p>

    <h3>10.7.2 Quality lead / QM officer: Measurement and improvement engine</h3>
    <h3>10.7.2 قائد الجودة / مسؤول إدارة الجودة (Quality lead / QM officer): محرك القياس والتحسين</h3>
    <p>هذا الدور يبني: تعريف المؤشرات، تحليل البيانات، عرض الاتجاهات، قيادة مشاريع التحسين، تمثيل القسم في لجان الجودة.</p>

    <h3>10.7.3 Safety officer: Incident learning and risk control</h3>
    <h3>10.7.3 مسؤول السلامة (Safety officer): تعلّم الحوادث وضبط المخاطر</h3>
    <p>المهام الجوهرية: تدفق الإبلاغ عن الحوادث، الفرز (<span class="english-term">Triage</span>) والمراجعات السريعة، تنسيق RCA عند الحاجة، نشر الدروس المستفادة، متابعة الالتزام بعد التغيير.</p>
    <p>والأهم: ألا تكون هذه الأدوار “بطلًا واحدًا”. بل تُسند بلجنة: <span class="english-term">QM committee</span> (لجنة جودة القسم) تضم خبرات متنوعة ودعمًا من IT.</p>

    <div class="scene-box">
        <span class="scene-title">حقيقة واقعية</span>
        <p>القسم الذي يعتمد على “شخص واحد يعرف كل شيء” هو قسم ينهار عند غياب هذا الشخص.</p>
        <p>أما القسم الذي يبني نظامًا… فهو قسم ينجو حتى في الأيام الصعبة.</p>
    </div>

    <div class="divider">***</div>

    <h2>10.8 BOXES</h2>
    <h3>10.8 صناديق  (BOXES)</h3>

    <h2>BOX 10.1 — Standardization vs Flexibility: A Practical Decision Matrix</h2>
    <h3>BOX 10.1 — التوحيد القياسي مقابل المرونة: مصفوفة قرار عملية</h3>
    <div class="concept-box">
        <p><strong>Standardize (وحّد) عندما:</strong></p>
        <ul>
            <li>الخطر عالي (<span class="english-term">airway, vasoactives, local anesthetic dosing</span>)</li>
            <li>الخطوة متكررة يوميًا</li>
            <li>احتمال النسيان تحت الضغط موجود</li>
            <li>تحتاج قياسًا موثوقًا</li>
        </ul>
        <p><strong>Allow flexibility (اسمح بالمرونة) عندما:</strong></p>
        <ul>
            <li>المريض يفرض خيارًا مختلفًا</li>
            <li>الحالة نادرة أو جديدة</li>
            <li>البروتوكول لا يطابق الواقع السريري</li>
        </ul>
        <div class="success-box">
            <strong>Rule (قاعدة):</strong> الانحراف مسموح… لكنه يجب أن يكون نادرًا ومبررًا.
        </div>
    </div>

    <h2>BOX 10.2 — Staffing and Escalation Blueprint (Minimum elements)</h2>
    <h3>BOX 10.2 — مخطط التغطية والتصعيد (Minimum elements)</h3>
    <div class="quote-box">
        <ul>
            <li>خطة تغطية مبنية على التعقيد والكفاءة والحجم، مع حد أدنى آمن + مرونة تشغيلية.</li>
            <li>حماية من الإرهاق: تجنب نوبات مفرطة مع استراتيجية إغاثة عند تجاوز الحدود.</li>
            <li>سُلّم تصعيد مكتوب ومعلّق (<span class="english-term">primary ← supervisor ← on-call consultant ← hospital emergency response</span>).</li>
            <li>تعيين “مشرف الشفت/<span class="english-term">Charge anesthesiologist</span>” مع توقعات زمنية للاستجابة.</li>
        </ul>
    </div>

    <h2>BOX 10.3 — Technology Reliability Basics in Anesthesia</h2>
    <h3>BOX 10.3 — أساسيات موثوقية التقنية في التخدير</h3>
    <div class="concept-box">
        <ul>
            <li><span class="english-term">Machine checklist</span> (فحص الجهاز) قبل كل مريض مع توثيق زمني.</li>
            <li>مراقبة مستمرة للأكسجة والتهوية والدورة والحرارة + ضغط كل 5 دقائق كحد أدنى.</li>
            <li>تقارير بيانات شهرية للحوادث و<span class="english-term">near miss</span> والاتجاهات.</li>
            <li>إنذارات مضبوطة لتقلل <span class="english-term">alarm fatigue</span> مع سياسة استجابة واضحة.</li>
        </ul>
    </div>

    <div class="divider">***</div>

    <h2>10.9 End-of-chapter tools</h2>
    <h3>10.9 أدوات نهاية الفصل (End-of-chapter tools)</h3>

    <div class="concept-box">
        <h4>أداة سريعة: “تدقيق ذاتي لموثوقية القسم” (5 دقائق)</h4>
        <ul>
            <li>هل لدينا <span class="english-term">Standard work</span> (عمل معياري) مكتوب للخطوات الحرجة (فحص جهاز، أدوية، <span class="english-term">handoff</span>)؟</li>
            <li>هل الانحراف عن البروتوكول نادر ومبرر ومُوثّق؟ وإن تكرر… هل حولناه لمشروع تحسين؟</li>
            <li>هل نموذج التغطية يحمي من <span class="english-term">Fatigue</span> (الإرهاق) ويملك خطة إغاثة واضحة؟</li>
            <li>هل <span class="english-term">Escalation</span> (التصعيد) واضح ومقبول ثقافيًا (الاتصال المبكر يُمدح)؟</li>
            <li>هل أدوار السلامة والجودة محددة بصلاحيات وبيانات ودعم لجنة؟</li>
        </ul>
    </div>

    <div class="success-box">
        <h4>ملخص الفصل (Chapter 10 summary)</h4>
        <ul>
            <li>الموثوقية في التخدير تُصمَّم كنظام: عمليات معيارية + إشراف وتصعيد + قياس + تقنية مضبوطة.</li>
            <li>وحِّد ما يجب أن يكون متوقعًا، واترك المرونة حيث تفرضها خصوصية المريض—لكن دون تحايل يتجاوز الدفاعات.</li>
            <li>التغطية والإرهاق ليست “جدولًا” فقط؛ هي قرار سلامة.</li>
            <li>التقنية تصبح دفاعًا فقط عندما تُدار بوعي: فحص، معايير مراقبة، إنذارات معقولة، وبيانات تتعلم.</li>
        </ul>
    </div>

    



    a.download = "الفصل_العاشر_تصميم_الموثوقية.html";
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }
    </script>




<style>
    .nav-footer-static {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(to bottom, rgba(255,255,255,0.9), rgba(255,255,255,0.98));
        backdrop-filter: blur(10px);
        padding: 15px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
        z-index: 1000;
        border-top: 2px solid #e5e7eb;
    }
    .nav-btn-static {
        font-family: 'Noto Kufi Arabic', Arial, sans-serif;
        background: linear-gradient(135deg, #2563eb 0%, #3b82f6 100%);
        color: white !important;
        padding: 12px 24px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
        font-size: 15px;
        transition: all 0.3s ease;
        border: none;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        cursor: pointer;
    }
    .nav-btn-static:hover {
        background: linear-gradient(135deg, #1d4ed8 0%, #2563eb 100%);
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    .nav-btn-static.disabled {
        opacity: 0.5;
        cursor: not-allowed;
        pointer-events: none;
    }
    .nav-btn-static.prev::before {
        content: '← ';
    }
    .nav-btn-static.next::after {
        content: ' →';
    }
    .nav-center-static {
        font-family: 'Noto Kufi Arabic', Arial, sans-serif;
        font-weight: 600;
        color: #2563eb;
        font-size: 16px;
    }
    .nav-home-btn {
        font-family: 'Noto Kufi Arabic', Arial, sans-serif;
        background: #10b981;
        color: white !important;
        padding: 10px 20px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
        font-size: 14px;
        transition: all 0.3s ease;
    }
    .nav-home-btn:hover {
        background: #059669;
        transform: translateY(-2px);
    }
    @media (max-width: 768px) {
        .nav-footer-static {
            flex-direction: column;
            gap: 10px;
            padding: 12px 15px;
        }
        .nav-btn-static {
            width: 100%;
            text-align: center;
            font-size: 14px;
            padding: 10px 16px;
        }
        .nav-center-static {
            order: -1;
            margin-bottom: 5px;
        }
        .nav-home-btn {
            width: 100%;
            text-align: center;
        }
    }
</style>
<div class="nav-footer-static">
    <a href="/anesthesia-safety/chapter/9" class="nav-btn-static prev">السابق: الفصل 9</a>
    <div class="nav-center-static">
        <a href="/anesthesia-safety/chapters/" class="nav-home-btn">📚 الفصول</a>
    </div>
    <a href="/anesthesia-safety/chapter/11" class="nav-btn-static next">التالي: الفصل 11</a>
</div>

<script src="/static/chapter-enhancements.js"></script>
</body></html>